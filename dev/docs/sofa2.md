# Brain
- score 0 = GCS 15 (or thumbs-up, fist, or peace sign)
- score 1 = GCS 13–14 (or localizing to pain) or need for drugs to treat delirium
- score 2 = GCS 9–12 (or withdrawal to pain)
- score 3 = GCS 6–8 (or flexion to pain)
- score 4 = GCS 3–5 (or extension to pain, no response to pain, generalized myoclonus)

# Respiratory
- score 0 = PaO₂:FiO₂ ratio >300 mm Hg (>40 kPa)
- score 1 = PaO₂:FiO₂ ratio ≤300 mm Hg (≤40 kPa)
- score 2 = PaO₂:FiO₂ ratio ≤225 mm Hg (≤30 kPa)
- score 3 = PaO₂:FiO₂ ratio ≤150 mm Hg (≤20 kPa) and advanced ventilatory support
- score 4 = PaO₂:FiO₂ ratio ≤75 mm Hg (≤10 kPa) and advanced ventilatory support or ECMO

# Cardiovascular
| score | spec | status |
|----------|----------|----------|
| 0 | MAP ≥70 mm Hg, no vasopressor or inotrope use | |
| 1 | MAP <70 mm Hg, no vasopressor or inotrope use | |
| 2 | Low-dose vasopressor (sum of norepinephrine and epinephrine ≤0.2 μg/kg/min) or any dose of other vasopressor or inotrope | |
| 3 | Medium-dose vasopressor (sum of norepinephrine and epinephrine >0.2 to ≤0.4 μg/kg/min) or low-dose vasopressor (sum of norepinephrine and epinephrine ≤0.2 μg/kg/min) with any other vasopressor or inotrope | |
| 4 | High-dose vasopressor (sum of norepinephrine and epinephrine >0.4 μg/kg/min)  or medium-dose vasopressor (sum of norepinephrine and epinephrine >0.2 to ≤0.4 μg/kg/min) with any other vasopressor or inotrope or mechanical support | |

# Liver
- score 0 = Total bilirubin ≤1.20 mg/dL (≤20.6 μmol/L)
- score 1 = Total bilirubin ≤3.0 mg/dL (≤51.3 μmol/L)
- score 2 = Total bilirubin ≤6.0 mg/dL (≤102.6 μmol/L)
- score 3 = Total bilirubin ≤12.0 mg/dL (≤205 μmol/L)
- score 4 = Total bilirubin >12 mg/dL (>205 μmol/L)

# Kidney
- score 0 = Creatinine ≤1.20 mg/dL (≤110 μmol/L)
- score 1 = Creatinine ≤2.0 mg/dL (≤170 μmol/L)  
  or urine output <0.5 mL/kg/h for 6–12 h
- score 2 = Creatinine ≤3.50 mg/dL (≤300 μmol/L)  
  or urine output <0.5 mL/kg/h for ≥12 h
- score 3 = Creatinine >3.50 mg/dL (>300 μmol/L)  
  or urine output <0.3 mL/kg/h for ≥24 h  
  or anuria (0 mL) for ≥12 h
- score 4 = Receiving or fulfills criteria for RRT (includes chronic use)

# Hemostasis
- score 0 = Platelets >150 × 10³/μL
- score 1 = Platelets ≤150 × 10³/μL
- score 2 = Platelets ≤100 × 10³/μL
- score 3 = Platelets ≤80 × 10³/μL
- score 4 = Platelets ≤50 × 10³/μL

# Notes

| spec | status |
|----------|----------|
| 1 For sedated patients, use the last GCS before sedation; if unknown, score 0. | |
| 2 If full GCS cannot be assessed, use the best motor response score only. | |
| 3 If the patient is receiving drug therapy for delirium, score 1 point even if GCS is 15. For relevant drugs, see the International Management of Pain, Agitation, and Delirium in Adult Patients in the ICU Guidelines. | |
4 Use the SpO₂:FiO₂ ratio only when PaO₂:FiO₂ ratio is unavailable and SpO₂ <98%. Cutoffs: 0 points, >300 mm Hg; 1 point, ≤300 mm Hg; 2 points, ≤250 mm Hg; 3 points, ≤200 mm Hg with ventilatory support; 4 points, ≤120 mm Hg with ventilatory support or ECMO.
5 Advanced ventilatory support includes HFNC, CPAP, BiPAP, noninvasive or invasive mechanical ventilation, or long-term home ventilation. Scores of 3-4 require both an appropriate PaO₂:FiO₂ or SpO₂:FiO₂ ratio and advanced ventilatory support; ignore transient changes within 1 hour (e.g., after suctioning).
6 Patients without advanced respiratory support can score at most 2 points unless ventilatory support is (1) unavailable or (2) limited by ceiling of treatment; if so, scored by PaO₂:FiO₂ or SpO₂:FiO₂ alone.
7 If ECMO is used for respiratory failure, assign 4 points in the respiratory system (regardless of PaO₂:FiO₂) and do not score it in the cardiovascular system. If ECMO is used for cardiovascular indications, score it in both cardiovascular and respiratory systems.
| 8 Count vasopressors only if given as a continuous IV infusion for ≥1 hour. | ing |
9 Norepinephrine dosing should be expressed as the base: 1 mg norepinephrine base ≈ 2 mg norepinephrine bitartrate monohydrate ≈ 1.89 mg anhydrous bitartrate (hydrogen/acid/tartrate) ≈ 1.22 mg hydrochloride.
10 If dopamine is used as a single vasopressor, use these cutoffs: 2 points, 20 μg/kg/min; 3 points, >20 to 40 μg/kg/min; 4 points, >40 μg/kg/min.
11 When vasoactive drugs are unavailable or limited by ceiling of treatment, use MAP cutoffs for scoring: 0 point, ≥70 mm Hg; 1 point, 60-69 mm Hg; 2 points, 50-59 mm Hg; 3 points, 40-49 mm Hg; 4 points, <40 mm Hg.
12 Mechanical cardiovascular support includes venoarterial ECMO, IABP, LV assist device, microaxial flow pump.
13 Excludes patients receiving RRT exclusively for nonrenal causes (e.g., toxin, bacterial toxin, or cytokine removal).
14 For patients not receiving RRT (eg, ceiling of treatment, machine unavailability, or delayed start), score 4 points if they otherwise meet RRT criteria: creatinine >1.2 mg/dL (>110 μmol/L) or oliguria (<0.3 mL/kg/h) for >6 hours plus either serum potassium ≥6.0 mmol/L or metabolic acidosis (pH ≤7.20 and serum bicarbonate ≤12 mmol/L).
15 For patients on intermittent RRT, score 4 points on days not receiving RRT until RRT use is terminated.

# deduplication of mar_action_category
Adapt the following query to deduplicate the mar_action_category column which is necessary for accurately measuring the continuous duration of medication administration (and avoid cases where we mistake the admin as stopped while it was stopped and started again instantly.) the permissible values for mar_action_category are: 'dose_change', 'going', 'start', 'stop', 'verify', 'other'.
```sql
SELECT *
FROM meds_df
QUALIFY ROW_NUMBER() OVER (
    PARTITION BY hospitalization_id, admin_dttm, med_category
    ORDER BY 
        -- apply mar action dedup logic
        CASE WHEN mar_action_category IS NULL THEN 10
            WHEN mar_action_category in ('verify', 'not_given') THEN 9
            WHEN mar_action_category = 'stop' THEN 8
            WHEN mar_action_category = 'going' THEN 7
            ELSE 1 END,
        -- if tied at the same mar action, deprioritize zero or null doses
        CASE WHEN med_dose > 0 THEN 1
            ELSE 2 END,
        -- prioritize larger doses
        med_dose DESC 
) = 1
ORDER BY hospitalization_id, med_category, admin_dttm;
```