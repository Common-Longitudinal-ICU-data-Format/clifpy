
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Python Client for Common Longitudinal ICU data Format">
      
      
        <meta name="author" content="CLIF Consortium">
      
      
        <link rel="canonical" href="https://common-longitudinal-icu-data-format.github.io/clifpy/user-guide/comorbidity-index/">
      
      
        <link rel="prev" href="../waterfall/">
      
      
        <link rel="next" href="../../api/">
      
      
      <link rel="icon" href="../../images/clif_logo_red_no_text.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Comorbidity Index - CLIFpy Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="maroon" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#comorbidity-index-computation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CLIFpy Documentation" class="md-header__button md-logo" aria-label="CLIFpy Documentation" data-md-component="logo">
      
  <img src="../../images/clif_logo_no_text_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CLIFpy Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Comorbidity Index
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="maroon" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Common-Longitudinal-ICU-data-Format/clifpy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    clifpy
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CLIFpy Documentation" class="md-nav__button md-logo" aria-label="CLIFpy Documentation" data-md-component="logo">
      
  <img src="../../images/clif_logo_no_text_white.png" alt="logo">

    </a>
    CLIFpy Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Common-Longitudinal-ICU-data-Format/clifpy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    clifpy
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Core Features
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Core Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../outlier-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outlier Handling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../encounter-stitching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Encounter Stitching
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wide-dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Wide Dataset Creation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../timezones/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with Timezones
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Advanced Features
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Advanced Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../med-unit-conversion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Medication Unit Conversion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sofa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SOFA Score Computation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../waterfall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Respiratory Support Waterfall
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Comorbidity Index
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Comorbidity Index
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#charlson-comorbidity-index-cci" class="md-nav__link">
    <span class="md-ellipsis">
      Charlson Comorbidity Index (CCI)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Charlson Comorbidity Index (CCI)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cci-conditions-and-weights" class="md-nav__link">
    <span class="md-ellipsis">
      CCI Conditions and Weights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-cci-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic CCI Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cci-output-format" class="md-nav__link">
    <span class="md-ellipsis">
      CCI Output Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elixhauser-comorbidity-index" class="md-nav__link">
    <span class="md-ellipsis">
      Elixhauser Comorbidity Index
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Elixhauser Comorbidity Index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elixhauser-conditions-and-van-walraven-weights" class="md-nav__link">
    <span class="md-ellipsis">
      Elixhauser Conditions and van Walraven Weights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-elixhauser-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Elixhauser Usage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#working-with-different-input-types" class="md-nav__link">
    <span class="md-ellipsis">
      Working with Different Input Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hierarchy-logic" class="md-nav__link">
    <span class="md-ellipsis">
      Hierarchy Logic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hierarchy-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Hierarchy Rules
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Data Requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#input-data-format" class="md-nav__link">
    <span class="md-ellipsis">
      Input Data Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#icd-code-processing" class="md-nav__link">
    <span class="md-ellipsis">
      ICD Code Processing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#large-datasets" class="md-nav__link">
    <span class="md-ellipsis">
      Large Datasets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Usage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clinical-interpretation" class="md-nav__link">
    <span class="md-ellipsis">
      Clinical Interpretation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Clinical Interpretation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cci-score-interpretation" class="md-nav__link">
    <span class="md-ellipsis">
      CCI Score Interpretation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elixhauser-score-interpretation" class="md-nav__link">
    <span class="md-ellipsis">
      Elixhauser Score Interpretation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#research-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Research Applications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-and-customization" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration and Customization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration and Customization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaml-configuration-files" class="md-nav__link">
    <span class="md-ellipsis">
      YAML Configuration Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-mappings" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Mappings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validation" class="md-nav__link">
    <span class="md-ellipsis">
      Validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/orchestrator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Orchestrator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/base-table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base Table
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/utilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utilities
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#charlson-comorbidity-index-cci" class="md-nav__link">
    <span class="md-ellipsis">
      Charlson Comorbidity Index (CCI)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Charlson Comorbidity Index (CCI)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cci-conditions-and-weights" class="md-nav__link">
    <span class="md-ellipsis">
      CCI Conditions and Weights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-cci-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic CCI Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cci-output-format" class="md-nav__link">
    <span class="md-ellipsis">
      CCI Output Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elixhauser-comorbidity-index" class="md-nav__link">
    <span class="md-ellipsis">
      Elixhauser Comorbidity Index
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Elixhauser Comorbidity Index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elixhauser-conditions-and-van-walraven-weights" class="md-nav__link">
    <span class="md-ellipsis">
      Elixhauser Conditions and van Walraven Weights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-elixhauser-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Elixhauser Usage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#working-with-different-input-types" class="md-nav__link">
    <span class="md-ellipsis">
      Working with Different Input Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hierarchy-logic" class="md-nav__link">
    <span class="md-ellipsis">
      Hierarchy Logic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hierarchy-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Hierarchy Rules
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Data Requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#input-data-format" class="md-nav__link">
    <span class="md-ellipsis">
      Input Data Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#icd-code-processing" class="md-nav__link">
    <span class="md-ellipsis">
      ICD Code Processing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#large-datasets" class="md-nav__link">
    <span class="md-ellipsis">
      Large Datasets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Usage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clinical-interpretation" class="md-nav__link">
    <span class="md-ellipsis">
      Clinical Interpretation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Clinical Interpretation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cci-score-interpretation" class="md-nav__link">
    <span class="md-ellipsis">
      CCI Score Interpretation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elixhauser-score-interpretation" class="md-nav__link">
    <span class="md-ellipsis">
      Elixhauser Score Interpretation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#research-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Research Applications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-and-customization" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration and Customization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration and Customization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaml-configuration-files" class="md-nav__link">
    <span class="md-ellipsis">
      YAML Configuration Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-mappings" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Mappings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validation" class="md-nav__link">
    <span class="md-ellipsis">
      Validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="comorbidity-index-computation">Comorbidity Index Computation<a class="headerlink" href="#comorbidity-index-computation" title="Permanent link">&para;</a></h1>
<p>CLIFpy provides comprehensive functionality for calculating comorbidity indices from hospital diagnosis data. These indices are essential tools in clinical research for quantifying patient complexity and adjusting for disease burden in outcomes studies.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Comorbidity indices are standardized scoring systems that summarize the burden of concurrent diseases in hospitalized patients. CLIFpy implements two widely-used indices:</p>
<ul>
<li><strong>Charlson Comorbidity Index (CCI)</strong> - 17 conditions with differential weighting</li>
<li><strong>Elixhauser Comorbidity Index</strong> - 31 conditions with van Walraven weights</li>
</ul>
<p>Both indices use ICD-10-CM diagnosis codes and implement hierarchy logic to prevent double-counting of related conditions.</p>
<div class="admonition warning">
<p class="admonition-title">Important Usage Note</p>
<p>Hospital diagnosis codes are finalized billing diagnosis codes for reimbursement. They are appropriate for calculating comorbidity scores but should <strong>not</strong> be used as input features for prediction models of inpatient events.</p>
</div>
<h2 id="charlson-comorbidity-index-cci">Charlson Comorbidity Index (CCI)<a class="headerlink" href="#charlson-comorbidity-index-cci" title="Permanent link">&para;</a></h2>
<p>The Charlson Comorbidity Index predicts 10-year mortality risk based on 17 comorbid conditions. CLIFpy implements the Quan et al. (2011) adaptation for ICD-10-CM codes.</p>
<h3 id="cci-conditions-and-weights">CCI Conditions and Weights<a class="headerlink" href="#cci-conditions-and-weights" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Condition</th>
<th>Weight</th>
<th>Example ICD-10-CM Codes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Myocardial Infarction</td>
<td>1</td>
<td>I21, I22, I252</td>
</tr>
<tr>
<td>Congestive Heart Failure</td>
<td>1</td>
<td>I50, I099, I110</td>
</tr>
<tr>
<td>Peripheral Vascular Disease</td>
<td>1</td>
<td>I70, I71, I731</td>
</tr>
<tr>
<td>Cerebrovascular Disease</td>
<td>1</td>
<td>I60-I69, G45, G46</td>
</tr>
<tr>
<td>Dementia</td>
<td>1</td>
<td>F00-F03, G30, G311</td>
</tr>
<tr>
<td>Chronic Pulmonary Disease</td>
<td>1</td>
<td>J40-J47, J60-J67</td>
</tr>
<tr>
<td>Connective Tissue Disease</td>
<td>1</td>
<td>M05, M06, M32-M34</td>
</tr>
<tr>
<td>Peptic Ulcer Disease</td>
<td>1</td>
<td>K25-K28</td>
</tr>
<tr>
<td>Mild Liver Disease</td>
<td>1</td>
<td>K70-K77</td>
</tr>
<tr>
<td>Diabetes (uncomplicated)</td>
<td>1</td>
<td>E10-E14</td>
</tr>
<tr>
<td>Hemiplegia</td>
<td>2</td>
<td>G81, G82</td>
</tr>
<tr>
<td>Renal Disease</td>
<td>2</td>
<td>N18-N19, N052-N057</td>
</tr>
<tr>
<td>Diabetes with Complications</td>
<td>2</td>
<td>E10-E14 with complications</td>
</tr>
<tr>
<td>Cancer</td>
<td>2</td>
<td>C00-C26, C30-C34, C37-C41</td>
</tr>
<tr>
<td>Moderate/Severe Liver Disease</td>
<td>3</td>
<td>I85, I864, I982, K704</td>
</tr>
<tr>
<td>Metastatic Solid Tumor</td>
<td>6</td>
<td>C77-C80</td>
</tr>
<tr>
<td>AIDS</td>
<td>6</td>
<td>B20-B22, B24</td>
</tr>
</tbody>
</table>
<h3 id="basic-cci-usage">Basic CCI Usage<a class="headerlink" href="#basic-cci-usage" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">clifpy.tables.hospital_diagnosis</span><span class="w"> </span><span class="kn">import</span> <span class="n">HospitalDiagnosis</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">clifpy.utils.comorbidity</span><span class="w"> </span><span class="kn">import</span> <span class="n">calculate_cci</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># Load hospital diagnosis data</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">hosp_dx</span> <span class="o">=</span> <span class="n">HospitalDiagnosis</span><span class="p">(</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">data_directory</span><span class="o">=</span><span class="s1">&#39;/path/to/data&#39;</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;parquet&#39;</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n">timezone</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="c1"># Calculate CCI scores</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">cci_results</span> <span class="o">=</span> <span class="n">calculate_cci</span><span class="p">(</span><span class="n">hosp_dx</span><span class="p">,</span> <span class="n">hierarchy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="c1"># View results</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">cci_results</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CCI score range: </span><span class="si">{</span><span class="n">cci_results</span><span class="p">[</span><span class="s1">&#39;cci_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">cci_results</span><span class="p">[</span><span class="s1">&#39;cci_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="cci-output-format">CCI Output Format<a class="headerlink" href="#cci-output-format" title="Permanent link">&para;</a></h3>
<p>The function returns a pandas DataFrame with:</p>
<ul>
<li><code>hospitalization_id</code> (index) - Unique hospitalization identifier</li>
<li>17 binary condition columns (0/1) - One for each CCI condition</li>
<li><code>cci_score</code> - Weighted sum of present conditions</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Example output structure</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">hospitalization_id</span>  <span class="n">myocardial_infarction</span>  <span class="n">congestive_heart_failure</span>  <span class="o">...</span>  <span class="n">cci_score</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">HOSP_001</span>           <span class="mi">1</span>                      <span class="mi">0</span>                         <span class="o">...</span>  <span class="mi">3</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">HOSP_002</span>           <span class="mi">0</span>                      <span class="mi">1</span>                         <span class="o">...</span>  <span class="mi">1</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">HOSP_003</span>           <span class="mi">0</span>                      <span class="mi">0</span>                         <span class="o">...</span>  <span class="mi">0</span>
</code></pre></div>
<h2 id="elixhauser-comorbidity-index">Elixhauser Comorbidity Index<a class="headerlink" href="#elixhauser-comorbidity-index" title="Permanent link">&para;</a></h2>
<p>The Elixhauser Index captures a broader range of comorbidities (31 conditions) and uses van Walraven weights for mortality prediction. It often provides better discrimination than CCI for in-hospital outcomes.</p>
<h3 id="elixhauser-conditions-and-van-walraven-weights">Elixhauser Conditions and van Walraven Weights<a class="headerlink" href="#elixhauser-conditions-and-van-walraven-weights" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Condition</th>
<th>Weight</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Congestive Heart Failure</td>
<td>7</td>
<td>Heart failure, cardiomyopathy</td>
</tr>
<tr>
<td>Cardiac Arrhythmias</td>
<td>5</td>
<td>Atrial fibrillation, other arrhythmias</td>
</tr>
<tr>
<td>Valvular Disease</td>
<td>-1</td>
<td>Heart valve disorders</td>
</tr>
<tr>
<td>Pulmonary Circulation</td>
<td>4</td>
<td>Pulmonary embolism, pulmonary hypertension</td>
</tr>
<tr>
<td>Peripheral Vascular</td>
<td>2</td>
<td>Peripheral artery disease</td>
</tr>
<tr>
<td>Hypertension (uncomplicated)</td>
<td>0</td>
<td>Essential hypertension</td>
</tr>
<tr>
<td>Hypertension (complicated)</td>
<td>0</td>
<td>Hypertensive complications</td>
</tr>
<tr>
<td>Paralysis</td>
<td>7</td>
<td>Paraplegia, hemiplegia</td>
</tr>
<tr>
<td>Other Neurological</td>
<td>6</td>
<td>Parkinson's, epilepsy, other</td>
</tr>
<tr>
<td>Chronic Pulmonary</td>
<td>3</td>
<td>COPD, asthma</td>
</tr>
<tr>
<td>Diabetes (uncomplicated)</td>
<td>0</td>
<td>Diabetes without complications</td>
</tr>
<tr>
<td>Diabetes (complicated)</td>
<td>0</td>
<td>Diabetes with complications</td>
</tr>
<tr>
<td>Hypothyroidism</td>
<td>0</td>
<td>Thyroid disorders</td>
</tr>
<tr>
<td>Renal Failure</td>
<td>5</td>
<td>Chronic kidney disease</td>
</tr>
<tr>
<td>Liver Disease</td>
<td>11</td>
<td>Chronic liver disease</td>
</tr>
<tr>
<td>Peptic Ulcer Disease</td>
<td>0</td>
<td>Peptic ulcers</td>
</tr>
<tr>
<td>AIDS/HIV</td>
<td>0</td>
<td>HIV/AIDS</td>
</tr>
<tr>
<td>Lymphoma</td>
<td>9</td>
<td>Lymphomas</td>
</tr>
<tr>
<td>Metastatic Cancer</td>
<td>12</td>
<td>Metastatic solid tumors</td>
</tr>
<tr>
<td>Solid Tumor</td>
<td>4</td>
<td>Non-metastatic cancer</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>... (31 total conditions)</td>
</tr>
</tbody>
</table>
<h3 id="basic-elixhauser-usage">Basic Elixhauser Usage<a class="headerlink" href="#basic-elixhauser-usage" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">clifpy.utils.comorbidity</span><span class="w"> </span><span class="kn">import</span> <span class="n">calculate_elix</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1"># Calculate Elixhauser scores</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="n">elix_results</span> <span class="o">=</span> <span class="n">calculate_elix</span><span class="p">(</span><span class="n">hosp_dx</span><span class="p">,</span> <span class="n">hierarchy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="c1"># View results</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="nb">print</span><span class="p">(</span><span class="n">elix_results</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Elixhauser score range: </span><span class="si">{</span><span class="n">elix_results</span><span class="p">[</span><span class="s1">&#39;elix_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">elix_results</span><span class="p">[</span><span class="s1">&#39;elix_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="c1"># Check condition prevalence</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="n">condition_prevalence</span> <span class="o">=</span> <span class="n">elix_results</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Most common conditions:&quot;</span><span class="p">)</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">condition_prevalence</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</code></pre></div>
<h2 id="advanced-usage">Advanced Usage<a class="headerlink" href="#advanced-usage" title="Permanent link">&para;</a></h2>
<h3 id="working-with-different-input-types">Working with Different Input Types<a class="headerlink" href="#working-with-different-input-types" title="Permanent link">&para;</a></h3>
<p>CLIFpy's comorbidity functions accept multiple input formats:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="c1"># Option 1: HospitalDiagnosis object (recommended)</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="n">cci_scores</span> <span class="o">=</span> <span class="n">calculate_cci</span><span class="p">(</span><span class="n">hosp_dx_table</span><span class="p">)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="c1"># Option 2: pandas DataFrame</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>    <span class="s1">&#39;hospitalization_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;H001&#39;</span><span class="p">,</span> <span class="s1">&#39;H001&#39;</span><span class="p">,</span> <span class="s1">&#39;H002&#39;</span><span class="p">],</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    <span class="s1">&#39;diagnosis_code&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;I21.45&#39;</span><span class="p">,</span> <span class="s1">&#39;E10.1&#39;</span><span class="p">,</span> <span class="s1">&#39;K25.5&#39;</span><span class="p">],</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>    <span class="s1">&#39;diagnosis_code_format&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;ICD10CM&#39;</span><span class="p">,</span> <span class="s1">&#39;ICD10CM&#39;</span><span class="p">,</span> <span class="s1">&#39;ICD10CM&#39;</span><span class="p">]</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="p">})</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="n">cci_scores</span> <span class="o">=</span> <span class="n">calculate_cci</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="c1"># Option 3: polars DataFrame</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="kn">import</span><span class="w"> </span><span class="nn">polars</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pl</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="n">pl_df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">from_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="n">cci_scores</span> <span class="o">=</span> <span class="n">calculate_cci</span><span class="p">(</span><span class="n">pl_df</span><span class="p">)</span>
</code></pre></div>
<h3 id="hierarchy-logic">Hierarchy Logic<a class="headerlink" href="#hierarchy-logic" title="Permanent link">&para;</a></h3>
<p>Both indices implement hierarchy logic (assign0) to prevent double-counting of related conditions:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># With hierarchy (default, recommended)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">cci_with_hierarchy</span> <span class="o">=</span> <span class="n">calculate_cci</span><span class="p">(</span><span class="n">hosp_dx</span><span class="p">,</span> <span class="n">hierarchy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="c1"># Without hierarchy (for research comparison)</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="n">cci_without_hierarchy</span> <span class="o">=</span> <span class="n">calculate_cci</span><span class="p">(</span><span class="n">hosp_dx</span><span class="p">,</span> <span class="n">hierarchy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="c1"># Compare the difference</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="n">hierarchy_impact</span> <span class="o">=</span> <span class="n">cci_with_hierarchy</span><span class="p">[</span><span class="s1">&#39;cci_score&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">cci_without_hierarchy</span><span class="p">[</span><span class="s1">&#39;cci_score&#39;</span><span class="p">]</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hierarchy reduces scores by: </span><span class="si">{</span><span class="n">hierarchy_impact</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> points on average&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="hierarchy-rules">Hierarchy Rules<a class="headerlink" href="#hierarchy-rules" title="Permanent link">&para;</a></h3>
<p><strong>CCI Hierarchies:</strong>
- Severe liver disease supersedes mild liver disease
- Diabetes with complications supersedes uncomplicated diabetes
- Metastatic cancer supersedes local cancer</p>
<p><strong>Elixhauser Hierarchies:</strong>
- Complicated hypertension supersedes uncomplicated hypertension
- Complicated diabetes supersedes uncomplicated diabetes
- Metastatic cancer supersedes solid tumor without metastasis</p>
<h2 id="data-requirements">Data Requirements<a class="headerlink" href="#data-requirements" title="Permanent link">&para;</a></h2>
<h3 id="input-data-format">Input Data Format<a class="headerlink" href="#input-data-format" title="Permanent link">&para;</a></h3>
<p>Your hospital diagnosis data must include these columns:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">required_columns</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>    <span class="s1">&#39;hospitalization_id&#39;</span><span class="p">,</span>      <span class="c1"># Unique hospitalization identifier</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    <span class="s1">&#39;diagnosis_code&#39;</span><span class="p">,</span>          <span class="c1"># ICD diagnosis code (e.g., &quot;I21.45&quot;)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="s1">&#39;diagnosis_code_format&#39;</span>    <span class="c1"># Code format (must be &quot;ICD10CM&quot;)</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="p">]</span>
</code></pre></div>
<h3 id="icd-code-processing">ICD Code Processing<a class="headerlink" href="#icd-code-processing" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Decimal handling</strong>: Codes like "I21.45" are automatically truncated to "I21" for mapping</li>
<li><strong>Format filtering</strong>: Only ICD10CM codes are processed; other formats are ignored</li>
<li><strong>Prefix matching</strong>: Uses prefix matching (e.g., "I21" matches all I21.x codes)</li>
</ul>
<h2 id="performance-considerations">Performance Considerations<a class="headerlink" href="#performance-considerations" title="Permanent link">&para;</a></h2>
<h3 id="large-datasets">Large Datasets<a class="headerlink" href="#large-datasets" title="Permanent link">&para;</a></h3>
<p>For large datasets, consider these optimization strategies:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Process in chunks for memory efficiency</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">chunk_size</span> <span class="o">=</span> <span class="mi">10000</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s1">&#39;large_file.parquet&#39;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="n">chunk_size</span><span class="p">):</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    <span class="n">chunk_results</span> <span class="o">=</span> <span class="n">calculate_cci</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chunk_results</span><span class="p">)</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="n">final_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<h3 id="memory-usage">Memory Usage<a class="headerlink" href="#memory-usage" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Polars backend</strong>: Both functions use polars internally for performance</li>
<li><strong>Memory efficient</strong>: Processes data without loading entire dataset into memory</li>
<li><strong>Progress tracking</strong>: Built-in progress bars for long-running calculations</li>
</ul>
<h2 id="clinical-interpretation">Clinical Interpretation<a class="headerlink" href="#clinical-interpretation" title="Permanent link">&para;</a></h2>
<h3 id="cci-score-interpretation">CCI Score Interpretation<a class="headerlink" href="#cci-score-interpretation" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Score Range</th>
<th>Mortality Risk</th>
<th>Typical Patient Population</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Low</td>
<td>Healthy patients, minor procedures</td>
</tr>
<tr>
<td>1-2</td>
<td>Moderate</td>
<td>Single comorbidity, routine surgery</td>
</tr>
<tr>
<td>3-4</td>
<td>High</td>
<td>Multiple comorbidities, complex cases</td>
</tr>
<tr>
<td>5</td>
<td>Very High</td>
<td>Severely ill, high-risk procedures</td>
</tr>
</tbody>
</table>
<h3 id="elixhauser-score-interpretation">Elixhauser Score Interpretation<a class="headerlink" href="#elixhauser-score-interpretation" title="Permanent link">&para;</a></h3>
<p>Elixhauser scores can be negative due to protective conditions (negative weights). Typical ranges:</p>
<ul>
<li><strong>0</strong>: Low complexity, some protective factors</li>
<li><strong>1-4</strong>: Moderate complexity</li>
<li><strong>5-15</strong>: High complexity</li>
<li><strong>&gt;15</strong>: Very high complexity, multiple severe conditions</li>
</ul>
<h3 id="research-applications">Research Applications<a class="headerlink" href="#research-applications" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Mortality risk stratification</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">def</span><span class="w"> </span><span class="nf">risk_category</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">index_type</span><span class="o">=</span><span class="s1">&#39;cci&#39;</span><span class="p">):</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="k">if</span> <span class="n">index_type</span> <span class="o">==</span> <span class="s1">&#39;cci&#39;</span><span class="p">:</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>        <span class="k">if</span> <span class="n">score</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>            <span class="k">return</span> <span class="s1">&#39;Low&#39;</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>        <span class="k">elif</span> <span class="n">score</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>            <span class="k">return</span> <span class="s1">&#39;Moderate&#39;</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>        <span class="k">elif</span> <span class="n">score</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">:</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>            <span class="k">return</span> <span class="s1">&#39;High&#39;</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>            <span class="k">return</span> <span class="s1">&#39;Very High&#39;</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>    <span class="c1"># Add Elixhauser categorization as needed</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="c1"># Apply risk stratification</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="n">results</span><span class="p">[</span><span class="s1">&#39;risk_category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s1">&#39;cci_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">risk_category</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;cci&#39;</span><span class="p">)</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="p">)</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="c1"># Analyze by risk category</span>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="n">risk_summary</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;risk_category&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>    <span class="s1">&#39;cci_score&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">]</span>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="p">})</span>
</code></pre></div>
<h2 id="configuration-and-customization">Configuration and Customization<a class="headerlink" href="#configuration-and-customization" title="Permanent link">&para;</a></h2>
<h3 id="yaml-configuration-files">YAML Configuration Files<a class="headerlink" href="#yaml-configuration-files" title="Permanent link">&para;</a></h3>
<p>Comorbidity mappings are stored in YAML files:</p>
<ul>
<li><code>clifpy/data/comorbidity/cci.yaml</code> - CCI mappings and weights</li>
<li><code>clifpy/data/comorbidity/elixhauser.yaml</code> - Elixhauser mappings and weights</li>
</ul>
<h3 id="configuration-structure">Configuration Structure<a class="headerlink" href="#configuration-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># Example CCI configuration structure</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Charlson</span><span class="nv"> </span><span class="s">Comorbidity</span><span class="nv"> </span><span class="s">Index&quot;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;quan&quot;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="nt">supported_formats</span><span class="p">:</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ICD10CM</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="nt">diagnosis_code_mappings</span><span class="p">:</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">  </span><span class="nt">ICD10CM</span><span class="p">:</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span><span class="nt">myocardial_infarction</span><span class="p">:</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">      </span><span class="nt">codes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;I21&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;I22&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;I252&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;History</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">definite</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">probable</span><span class="nv"> </span><span class="s">MI&quot;</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span><span class="c1"># ... other conditions</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="nt">weights</span><span class="p">:</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">  </span><span class="nt">myocardial_infarction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">  </span><span class="c1"># ... other weights</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="nt">hierarchies</span><span class="p">:</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">higher</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;diabetes_with_complications&quot;</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">    </span><span class="nt">lower</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;diabetes_uncomplicated&quot;</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="w">  </span><span class="c1"># ... other hierarchies</span>
</code></pre></div>
<h3 id="custom-mappings">Custom Mappings<a class="headerlink" href="#custom-mappings" title="Permanent link">&para;</a></h3>
<p>For research requiring custom mappings, you can modify the YAML files or create custom versions. Ensure proper validation and testing when using custom configurations.</p>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="common-issues">Common Issues<a class="headerlink" href="#common-issues" title="Permanent link">&para;</a></h3>
<p><strong>No ICD10CM codes found:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># Check your data format</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">hosp_dx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;diagnosis_code_format&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="c1"># Ensure codes are marked as &#39;ICD10CM&#39;</span>
</code></pre></div></p>
<p><strong>Unexpected zero scores:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># Check for missing hospitalization_id</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">missing_ids</span> <span class="o">=</span> <span class="n">hosp_dx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hospitalization_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Missing hospitalization IDs: </span><span class="si">{</span><span class="n">missing_ids</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="c1"># Verify diagnosis codes are properly formatted</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="nb">print</span><span class="p">(</span><span class="n">hosp_dx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;diagnosis_code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</code></pre></div></p>
<p><strong>Memory errors with large datasets:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># Monitor memory usage</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">psutil</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Memory usage: </span><span class="si">{</span><span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">percent</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="c1"># Consider processing in smaller chunks</span>
</code></pre></div></p>
<h3 id="validation">Validation<a class="headerlink" href="#validation" title="Permanent link">&para;</a></h3>
<p>Always validate your results:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># Basic validation checks</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">assert</span> <span class="ow">not</span> <span class="n">cci_results</span><span class="p">[</span><span class="s1">&#39;cci_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(),</span> <span class="s2">&quot;CCI scores contain NaN&quot;</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="k">assert</span> <span class="p">(</span><span class="n">cci_results</span><span class="p">[</span><span class="s1">&#39;cci_score&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">(),</span> <span class="s2">&quot;CCI scores should be non-negative&quot;</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="k">assert</span> <span class="n">cci_results</span><span class="p">[</span><span class="s1">&#39;hospitalization_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">is_unique</span><span class="p">,</span> <span class="s2">&quot;Hospitalization IDs should be unique&quot;</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="c1"># Clinical validation</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="n">max_score</span> <span class="o">=</span> <span class="n">cci_results</span><span class="p">[</span><span class="s1">&#39;cci_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Maximum CCI score: </span><span class="si">{</span><span class="n">max_score</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="k">if</span> <span class="n">max_score</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">:</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: Unusually high CCI scores detected&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li>Quan H, et al. Coding algorithms for defining comorbidities in ICD-9-CM and ICD-10 administrative data. Med Care. 2005;43(11):1130-9.</li>
<li>van Walraven C, et al. A modification of the Elixhauser comorbidity measures into a point system for hospital death using administrative data. Med Care. 2009;47(6):626-33.</li>
<li>Charlson ME, et al. A new method of classifying prognostic comorbidity in longitudinal studies. J Chronic Dis. 1987;40(5):373-83.</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Common-Longitudinal-ICU-data-Format/CLIFpy" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/dark-mode-default.js"></script>
      
    
  </body>
</html>